<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secretary Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Sidebar navigation -->
    <div class="sidebar">
        <div class="top">
            <div class="logo">
                <i class="bx bxl-codepen"></i>
                <span>Mediplus</span>
            </div>
            <i class="bx bx-menu" id="btn"></i>
        </div>
        <div class="user">
            <img src="secretary.jpg" alt="secretary" class="user-img">
            <div>
                <p class="bold">Sec.</p>
                <p>Admin</p>
            </div>
        </div>
        <ul>
            <li>
                <a href="#">
                    <i class='bx bx-clinic'></i>
                    <span class="nav-item">Dashboard</span>
                </a>
                <span class="tooltip">Dashboard</span>
            </li>

            <li>
                <a href="#">
                    <i class='bx bx-heart-square'></i>
                    <span class="nav-item">Patients</span>
                </a>
                <span class="tooltip">Patients</span>
            </li>

            <li>
                <a href="#">
                    <i class='bx bx-calendar-plus' ></i>
                    <span class="nav-item">Appointments</span>
                </a>
                <span class="tooltip">Appointments</span>
            </li>

            <li>
                <a href="#">
                    <i class='bx bx-dollar-circle'></i>
                    <span class="nav-item">Payments</span>
                </a>
                <span class="tooltip">Payments</span>
            </li>
        </ul>
    </div>

    <!-- Main content area -->
    <div class="main-content">
        <h3 class="Dashboard">Secretary Dashboard</h3>
        <header>
            <div class="user-info">
                <p>Welcome,</p>
                <p class="sec">Sec. Clara Bennet</p>
            </div>
        </header>
        
        <!-- Dashboard Overview -->
        <section class="overview">
            <div class="card">
                <div>
                    <i class='bx bx-pulse'></i>
                    <h3>New Patients</h3>
                    <p id="patient-count">3145</p>
                    <p>+40% this month</p>
                </div>
                <img src="cart1.svg" alt="New Patients Icon">
            </div>
        
            <div class="card">
                <div>
                    <i class='bx bx-notepad'></i>
                    <h3>Today's Appointments</h3>
                    <p id="appointment-count">2500</p>
                   <p class="ddd">-20% Decrease</p> 
                </div>
                <img src="cart2.svg" alt="Appointments Icon">
            </div>
        
            <div class="card">
                <div>
                    <i class='bx bx-dollar-circle'></i>
                    <h3>Total Payments</h3>
                    <p id="payment-count">$980</p>
                    <p> +10% Increased</p>
                </div>
                <img src="cart3.svg" alt="Payments Icon">
            </div>
        </section>

        <div class="dash-container">
            <!-- Calendar -->
            <div class="dashboard-calendar">
                <div class="calendar-header">
                    <button id="prevBtn" class="nav-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div class="monthYear" id="monthYear"></div>
                    <button id="nextBtn" class="nav-btn">
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
                <div class="calendar-days">
                    <div class="day">Mon</div>
                    <div class="day">Tue</div>
                    <div class="day">Wed</div>
                    <div class="day">Thu</div>
                    <div class="day">Fri</div>
                    <div class="day">Sat</div>
                    <div class="day">Sun</div>
                </div>
                <div class="calendar-dates" id="dates"></div>
            </div>
        
            <!-- Earnings Card -->
            <div class="card-container">
                <div class="card-header">
                    <p class="title">TODAY'S EARNINGS</p>
                </div>
                <div class="card-body">
                    <p class="amount">$25,450</p>
                    <p class="description">Including all costs</p>
                </div>
                <div class="card-footer"></div>
            </div>
        </div>
        


<!-- Heartbeat Line -->
<div class="heartbeat-line">
    <svg viewBox="0 0 100 20" xmlns="http://www.w3.org/2000/svg">
        <polyline class="heartbeat" points="0,10 10,10 15,2 20,18 25,2 30,10 40,10 50,4 55,16 60,4 65,10 75,10 85,10 90,10 100,10" />
    </svg>
</div>



        <!--Chart-->
        <div class="charts-container">
            <div class="data-section">
                <h2>Patients Overview</h2>
                <div class="chart-card">
                    <canvas id="patientsChart"></canvas>
                </div>
            </div>
        
            <div class="data-section">
                <h2>Patients Gender</h2>
                <div class="chart-card">
                    <canvas id="patientsGender"></canvas>
                </div>
            </div>
        </div>
        







        <footer>
            <p>&copy; 2024 Cabinet Medical.</p>
        </footer>


   <script>
    let btn = document.querySelector('#btn');
    let sidebar = document.querySelector('.sidebar');

    btn.onclick = function() {
        sidebar.classList.toggle('active');
    }
   </script>
   <script src="main.js"></script>

   <script>
    // Récupérer les rendez-vous d'aujourd'hui
    fetch('api/todays_appointments.php')
        .then(response => response.json())
        .then(data => console.log('Rendez-vous d\'aujourd\'hui:', data))
        .catch(error => console.log('Erreur:', error));

    // Récupérer les paiements d'aujourd'hui
    fetch('api/todays_earnings.php')
        .then(response => response.json())
        .then(data => console.log('Paiements d\'aujourd\'hui:', data))
        .catch(error => console.log('Erreur:', error));

    // Récupérer les paiements totaux
    fetch('api/total_payments.php')
        .then(response => response.json())
        .then(data => console.log('Paiements totaux:', data))
        .catch(error => console.log('Erreur:', error));

    // Fetching data for the charts
    fetch('api/get_patients_data.php') // Make sure your API returns a proper JSON
    .then(response => response.json())
    .then(data => {
    // Update New Patients and Return Patients chart data dynamically
    patientsChart.data.datasets[0].data = data.newPatients;
    patientsChart.data.datasets[1].data = data.returnPatients;
    patientsChart.update();

    // Update Patients Gender chart data dynamically
    patientsGender.data.datasets[0].data = data.genderData; // [male, female, kids]
    patientsGender.update();
})
.catch(error => console.error('Error fetching data:', error));


     
</script>

</body>
</html>
